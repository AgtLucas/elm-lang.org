<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Pong</title><style type="text/css">html,head,body { padding:0; margin:0; }body { font-family: Arial; }a:link {text-decoration: none}a:visited {text-decoration: none}a:active {text-decoration: none}a:hover {text-decoration: underline; color: #ff8f12;}</style></head><body><script type="text/javascript" src="/elm-mini.js"></script><script type="text/javascript">var FrameRate=function(){var desiredFPS=40,msPerFrame=1000/desiredFPS;document.addEventListener('desiredFPS',function(e){console.log(e.value);desiredFPS=e.value;msPerFrame=1000/desiredFPS});var date=new Date(),startTime=date.getTime(),frameStart=startTime,frameEnd=startTime,timeoutID=0;document.addEventListener('finished',function(evt){clearTimeout(timeoutID);date=new Date();frameEnd=date.getTime();var diff=frameEnd-frameStart,waitTime=Math.max(msPerFrame-diff,3);timeoutID=setTimeout(function(){date=new Date();frameStart=date.getTime();var e=document.createEvent('Event');e.initEvent('trigger',true,true);e.value=(frameStart-startTime)/1000;document.dispatchEvent(e)},waitTime)})}();try{if(ElmCode.Pong)throw "Module name collision, 'Pong' is already defined.";ElmCode.Pong=function(){try{ElmCode.Prelude instanceof Object}catch(e){throw "Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file."};var hiddenVars=[];for(var i in ElmCode.Prelude){if(hiddenVars.indexOf(i)>=0)continue;this[i]=ElmCode.Prelude[i]};try{ElmCode.Foreign.JavaScript instanceof Object}catch(e){throw "Module 'Foreign.JavaScript' is missing. Compile with --make flag or load missing module in a separate JavaScript file."};var hiddenVars=[];for(var i in ElmCode.Foreign.JavaScript){if(hiddenVars.indexOf(i)>=0)continue;this[i]=ElmCode.Foreign.JavaScript[i]};try{ElmCode.Signal.Keyboard.Raw instanceof Object}catch(e){throw "Module 'Signal.Keyboard.Raw' is missing. Compile with --make flag or load missing module in a separate JavaScript file."};var hiddenVars=[];for(var i in ElmCode.Signal.Keyboard.Raw){if(hiddenVars.indexOf(i)>=0)continue;this[i]=ElmCode.Signal.Keyboard.Raw[i]};try{ElmCode.Signal.Window instanceof Object}catch(e){throw "Module 'Signal.Window' is missing. Compile with --make flag or load missing module in a separate JavaScript file."};var Win=ElmCode.Signal.Window,Up_4=["Up"],Neutral_5=["Neutral"],Down_6=["Down"]
function KeyInput_7(a1){return function(a2){return function(a3){return ["KeyInput",a1,a2,a3]}}}
function Input_14(a1){return function(a2){return ["Input",a1,a2]}}
function Paddle_16(a1){return ["Paddle",a1]}
function Ball_17(a1){return function(a2){return ["Ball",a1,a2]}}
function Score_18(a1){return function(a2){return ["Score",a1,a2]}};var Play_19=["Play"],BetweenRounds_20=["BetweenRounds"]
function GameState_21(a1){return function(a2){return function(a3){return function(a4){return function(a5){return ["GameState",a1,a2,a3,a4,a5]}}}}};var desiredFPS_0=constant(castIntToJSNumber(30)),jsTime_1=Elm.Input(castIntToJSNumber(0));Signal.addListener(document,'trigger',function(e){Dispatcher.notify(jsTime_1.id,e.value)});var time_2=lift(castJSNumberToFloat)(jsTime_1),delta_3=lift(snd)(foldp(function(t1_40){return function(Tuple2$t0d_41){return function(case3){var case0=case3;switch(case0[0]){case"Tuple2":var case1=case0[1],case2=case0[2];return ["Tuple2",t1_40,(t1_40-case1)]};throw "Non-exhaustive pattern match in case"}(Tuple2$t0d_41)}})(["Tuple2",0,0])(time_2)),defaultKeyInput_8=KeyInput_7(false)(Neutral_5)(Neutral_5),updateDirection1_10=updateDirection_9(87)(83),updateDirection2_11=updateDirection_9(38)(40),keyInput_13=lift(foldl(updateInput_12)(defaultKeyInput_8))(keysDown),input_15=sampleOn(delta_3)(lift2(Input_14)(delta_3)(keyInput_13)),gameWidth_22=600,gameHeight_23=400,halfWidth_24=(gameWidth_22/2),halfHeight_25=(gameHeight_23/2),defaultGame_26=GameState_21(BetweenRounds_20)(Score_18(0)(0))(Ball_17(["Tuple2",halfWidth_24,halfHeight_25])(["Tuple2",150,150]))(Paddle_16(halfHeight_25))(Paddle_16(halfHeight_25)),gameState_34=foldp(stepGame_33)(defaultGame_26)(input_15),view_37=lift2(display_36)(Win.dimensions)(gameState_34),done_38=lift(function(__130){return castBoolToJSBool(true)})(view_37),main_39=view_37
function updateDirection_9(upKey_44){return function(downKey_45){return function(key_46){return function(direction_47){return function(case1){var case0=case1;switch(case0[0]){case"Down":return(eq(key_46,upKey_44)?Neutral_5:Down_6);case"Neutral":return(eq(key_46,upKey_44)?Up_4:(eq(key_46,downKey_45)?Down_6:Neutral_5));case"Up":return(eq(key_46,downKey_45)?Neutral_5:Up_4)};throw "Non-exhaustive pattern match in case"}(direction_47)}}}}
function updateInput_12(key_48){return function(KeyInput$spacedir1dir2_49){return function(case4){var case0=case4;switch(case0[0]){case"KeyInput":var case1=case0[1],case2=case0[2],case3=case0[3];return KeyInput_7((case1||eq(key_48,32)))(updateDirection1_10(key_48)(case2))(updateDirection2_11(key_48)(case3))};throw "Non-exhaustive pattern match in case"}(KeyInput$spacedir1dir2_49)}}
function stepPaddle_27(delta_53){return function(dir_54){return function(Paddle$y_55){return function(case2){var case0=case2;switch(case0[0]){case"Paddle":var case1=case0[1];return function(case4){var case3=case4;switch(case3[0]){case"Down":return Paddle_16(clamp(20)((gameHeight_23-20))((case1+(200*delta_53))));case"Neutral":return Paddle_16(case1);case"Up":return Paddle_16(clamp(20)((gameHeight_23-20))((case1-(200*delta_53))))};throw "Non-exhaustive pattern match in case"}(dir_54)};throw "Non-exhaustive pattern match in case"}(Paddle$y_55)}}}
function makePositive_28(n_57){return((compare(n_57)(0)[0]==='GT')?n_57:(0-n_57))}
function makeNegative_29(n_58){return((compare(n_58)(0)[0]==='GT')?(0-n_58):n_58)}
function within_30(epsilon_59){return function(n_60){return function(x_61){return((compare(x_61)((n_60-epsilon_59))[0]==='GT')&&(compare(x_61)((n_60+epsilon_59))[0]==='LT'))}}}
function stepVelocity_31(velocity_62){return function(lowerCollision_63){return function(upperCollision_64){return(lowerCollision_63?makePositive_28(velocity_62):(upperCollision_64?makeNegative_29(velocity_62):velocity_62))}}}
function stepBall_32(delta_65){return function(Ball$Tuple2$xyTuple2$vxvy_66){return function(Paddle$y1_67){return function(Paddle$y2_68){return function(case7){var case0=case7;switch(case0[0]){case"Ball":var case1=case0[1],case2=case0[2];switch(case1[0]){case"Tuple2":var case3=case1[1],case4=case1[2];switch(case2[0]){case"Tuple2":var case5=case2[1],case6=case2[2];return function(case10){var case8=case10;switch(case8[0]){case"Paddle":var case9=case8[1];return function(case13){var case11=case13;switch(case11[0]){case"Paddle":var case12=case11[1];return function(){var hitPaddle1_75=(within_30(20)(case9)(case4)&&within_30(8)(25)(case3)),hitPaddle2_76=(within_30(20)(case12)(case4)&&within_30(8)((gameWidth_22-25))(case3)),vx__77=stepVelocity_31(case5)(hitPaddle1_75)(hitPaddle2_76),vy__78=stepVelocity_31(case6)((compare(case4)(7)[0]==='LT'))((compare(case4)((gameHeight_23-7))[0]==='GT')),scored_79=((compare(case3)(gameWidth_22)[0]==='GT')||(compare(case3)(0)[0]==='LT')),x__80=(scored_79?halfWidth_24:(case3+(vx__77*delta_65))),y__81=(scored_79?halfHeight_25:(case4+(vy__78*delta_65)));return ["Tuple3",Ball_17(["Tuple2",x__80,y__81])(["Tuple2",vx__77,vy__78]),((compare(case3)(gameWidth_22)[0]==='GT')?1:0),((compare(case3)(0)[0]==='LT')?1:0)]}()};throw "Non-exhaustive pattern match in case"}(Paddle$y2_68)};throw "Non-exhaustive pattern match in case"}(Paddle$y1_67)};break};break};throw "Non-exhaustive pattern match in case"}(Ball$Tuple2$xyTuple2$vxvy_66)}}}}
function stepGame_33(Input$deltaKeyInput$spacedir1dir2_82){return function(GameState$stateScore$s1s2ballpaddle1paddle2_83){return function(case6){var case0=case6;switch(case0[0]){case"Input":var case1=case0[1],case2=case0[2];switch(case2[0]){case"KeyInput":var case3=case2[1],case4=case2[2],case5=case2[3];return function(case15){var case7=case15;switch(case7[0]){case"GameState":var case8=case7[1],case9=case7[2],case10=case7[3],case11=case7[4],case12=case7[5];switch(case9[0]){case"Score":var case13=case9[1],case14=case9[2];return function(){var Tuple3$ball_s1_s2__94=(eq(case8,Play_19)?stepBall_32(case1)(case10)(case11)(case12):["Tuple3",case10,0,0]),ball__95=function(case20){var case16=case20;switch(case16[0]){case"Tuple3":var case17=case16[1],case18=case16[2],case19=case16[3];return case17};throw "Non-exhaustive pattern match in case"}(Tuple3$ball_s1_s2__94),s1__96=function(case25){var case21=case25;switch(case21[0]){case"Tuple3":var case22=case21[1],case23=case21[2],case24=case21[3];return case23};throw "Non-exhaustive pattern match in case"}(Tuple3$ball_s1_s2__94),s2__97=function(case30){var case26=case30;switch(case26[0]){case"Tuple3":var case27=case26[1],case28=case26[2],case29=case26[3];return case29};throw "Non-exhaustive pattern match in case"}(Tuple3$ball_s1_s2__94),state__98=function(case32){var case31=case32;switch(case31[0]){case"BetweenRounds":return(case3?Play_19:case8);case"Play":return(not(eq(s1__96,s2__97))?BetweenRounds_20:case8)};throw "Non-exhaustive pattern match in case"}(case8);return GameState_21(state__98)(Score_18((case13+s1__96))((case14+s2__97)))(ball__95)(stepPaddle_27(case1)(case4)(case11))(stepPaddle_27(case1)(case5)(case12))}()};break};throw "Non-exhaustive pattern match in case"}(GameState$stateScore$s1s2ballpaddle1paddle2_83)};break};throw "Non-exhaustive pattern match in case"}(Input$deltaKeyInput$spacedir1dir2_82)}}
function scoreBoard_35(w_108){return function(inPlay_109){return function(p1_110){return function(p2_111){return function(){var code_112=function(x){return text(monospace(toText(x)))},msg_114=function(x){return width(w_108)(centeredText(monospace(x)))}(toText("Press SPACE to begin")),board_115=flow(right)(["Cons",stack_113(Value.str("W"))(Value.str("S")),["Cons",spacer(20)(1),["Cons",function(x){return text(Text.height(4)(x))}(Value.append(show(p1_110),Value.append(toText("    "),show(p2_111)))),["Cons",spacer(20)(1),["Cons",stack_113(Value.str("&uarr;"))(Value.str("&darr;")),["Nil"]]]]]]),score_116=container(w_108)(heightOf(board_115))(midTop)(board_115)
function stack_113(top_117){return function(bottom_118){return flow(down)(["Cons",code_112(Value.str(" ")),["Cons",code_112(top_117),["Cons",code_112(bottom_118),["Nil"]]]])}};return(inPlay_109?score_116:above(score_116)(msg_114))}()}}}}
function display_36(Tuple2$wh_119){return function(GameState$stateScore$p1p2Ball$pos_Paddle$y1Paddle$y2_120){return function(case3){var case0=case3;switch(case0[0]){case"Tuple2":var case1=case0[1],case2=case0[2];return function(case16){var case4=case16;switch(case4[0]){case"GameState":var case5=case4[1],case6=case4[2],case7=case4[3],case8=case4[4],case9=case4[5];switch(case6[0]){case"Score":var case10=case6[1],case11=case6[2];switch(case7[0]){case"Ball":var case12=case7[1],case13=case7[2];switch(case8[0]){case"Paddle":var case14=case8[1];switch(case9[0]){case"Paddle":var case15=case9[1];return layers(["Cons",function(){var pongGreen_129=rgb(60)(100)(60);return container(case1)(case2)(middle)(collage(gameWidth_22)(gameHeight_23)(["Cons",filled(pongGreen_129)(rect(gameWidth_22)(gameHeight_23)(["Tuple2",halfWidth_24,halfHeight_25])),["Cons",filled(white)(oval(15)(15)(case12)),["Cons",filled(white)(rect(10)(40)(["Tuple2",20,case14])),["Cons",filled(white)(rect(10)(40)(["Tuple2",(gameWidth_22-20),case15])),["Nil"]]]]]))}(),["Cons",scoreBoard_35(case1)(eq(case5,Play_19))(case10)(case11),["Nil"]]])};break};break};break};break};throw "Non-exhaustive pattern match in case"}(GameState$stateScore$p1p2Ball$pos_Paddle$y1Paddle$y2_120)};throw "Non-exhaustive pattern match in case"}(Tuple2$wh_119)}};lift(function(v){var e=document.createEvent('Event');e.initEvent('desiredFPS',true,true);e.value=v;document.dispatchEvent(e);return v})(desiredFPS_0);lift(function(v){var e=document.createEvent('Event');e.initEvent('finished',true,true);e.value=v;document.dispatchEvent(e);return v})(done_38);return {main:main_39}}();ElmCode.main=function(){return ElmCode.Pong.main}}catch(e){ElmCode.main=function(){var msg=('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>'+'<br/><span style="color:grey">Runtime Error in Pong module:<br/>'+e+'<br/><br/>The problem may stem from an improper usage of:<br/>Win.dimensions, above, container, heightOf, midTop, middle, snd, spacer</span>');document.body.innerHTML=Text.monospace(msg);throw e}}</script><div id="widthChecker" style="width:100%; height:1px; position:absolute; top:-1px;"></div><div id="content"></div><script type="text/javascript">Dispatcher.initialize()</script><noscript><p> </p><p>Press SPACE to begin</p><p>W</p><p>S</p><p>    </p><p>&uarr;</p><p>&darr;</p></noscript></body></html>